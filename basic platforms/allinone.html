<!DOCTYPE html>
<html><head><meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<script>
function displayStringLoop(e,t,a,i,n,s){let c=Math.floor(frame/6%e.length);displayImage(e[c].a,e[c].c,t,a,i,n,s)}function displayImage(e,t,a,i,n,s,c){ctx=canvas.context;for(let F=0;F<e.length;F++)if(0!=t[e[F]]){if(F>trace)return void(trace=F);ctx.beginPath(),ctx.fillStyle=t[e[F]];let r=0;-1===c&&(r=n*s),ctx.fillRect(a+r+c*(F%n)*s,i+Math.floor(F/n)*s,c*(s+.5),s+.5),ctx.closePath()}}let c=["#000000","#ffd738","#d1ff3a","#327fa8","#6d92a6","#c37dc9","#c3f7f7","#9397bd","#c3dbf7","#dbc3f7","#fffb80","#1F29C1","#FF6638","#EAFF30","#FFFFFF","#EA1F1C","#8E423A","#FF6232","#8E7F7D","#D36A55","#f7d92a","#FFAB3D","#FF923F","#303030","#03a822","#9aed66"],walkLoop=[{s:"11111111121/6<G1)3)3BF03=2<2DF/PE@G-SGE=G,PZQG=FE=+FRGdGBF>F*SHdG2?H?F)RIeF2@G@F*IfF2@FB-gF2?FC+FhF2?FC*FhH2>FC)Fh(H2=F@F<F)GeG+F2=Fe@F)H.F2=Fe?F*G.eF2=FA*H-f2=F)>F+G-e(F2=*I1H)I*H1H*H+G)",c:[!1,c[15],c[17],c[16],c[18],c[0],c[19]]},{s:"11111111.311(3=2G1.2BF1)5DG.P4E?F,ZRGE?F+PdQGnDF?F*FRGnFAH?F)SHnG@G@F)RHpF2?FBF*JoF2?GAF-FoG2@FAF-pG2@FB,FoF(G2?Fo?F,FoF)F2>Go?F,Fo*F2>FoF>F,Fo+F2=FoG>F,Fo,F2<oF(F=F,Gn-F2<oF(F=F,H-HnF)=F-H,InF)G1,HnF)H,",c:[!1,c[15],c[17],c[16],c[18],c[0],c[19]]},{s:"11111111111(61/3@F1+4CG0P3E>G-RGE?,PZQGE?F+FRGdE>F*SHdE?F)RHe2BF@F+HeF2AG@F-FeF2@GBF,FeF2?GeAF,f2?GfF@F+FeF2>GfG?F,FeF2>GfF?F-fF2=)f(F>F-FeG=*FeF?-HdF2=*FeF>.G)F=F*GdG<0G(I+J1)H,Id.",c:[!1,c[15],c[17],c[16],c[18],c[0],c[19]]},{s:"11111111.4113>2F1.2BF1)3(2DG/3=2E=F-PEFBF+SFEAF*PZQGCFAF*FRGCFAG(SJBFAF(RKAFe@F*I(G@Ff@F/F@FfAF.F@GeAG-F?K@G-F?G)G@G-G>Fd*F@dF.F=Ge)F>Hd.G<F(f)F<HeF.H)Fe(I(FeG.G)H(H*I1)H1+",c:[!1,c[15],c[17],c[16],c[18],c[0],c[19]]},{s:"11111111111(7<1-3L=1*2OF<.3F(2OH<,PON+S=H<OF<*PZQ>F<2OF<*<Q?d<2OG)S@2OH<(RA2L<J<*?d<2K=K<.=2I=L=.<2I=d<L<-<2H>d=L<,<2H=(f=J<*>3F=e)e<I=*=H?d+d<I,=F=*=+d<G<1+>+=F<1+>*>d=1/>)=,",c:[!1,c[15],c[16],c[17],c[18],c[0],c[19]]},{s:"11111111-5103?21.2B3F1*3EF/4GE>-PECF+SG=FE<F+PZQG=F2E<F*FQH<F2E=F)SJ2E=G(RH(F2AFBF*H(G2@HAF-G2@GCF-F2>F<FgF@F,G2=IgAF,F2<I(g(AF,F2I)f)@F,Jd*eF)?F,If*Fe)?-HdG+Fe*>-G(G+Ge*F=F,G(G+H,H*",c:[!1,c[15],c[17],c[16],c[18],c[0],c[19]]},{s:"11111111111*2>103I<1)3*2L<03G2(2O.PJ2OF<,S=M<J<+PZQ=G<J=J<*<QA2J<J=(SA2J<J=(RA2K=J<)@)<2K<K<*>)=2J<L<.=2I<F<L<-<d<2I=dK<-f<2H<fJ<-<f<2G<g<I<,<f<2F=f(>I<*=e(<2=f+=I*>)?e-=I)>)=(>0?(=*=(=1(>",c:[!1,c[15],c[16],c[17],c[18],c[0],c[19]]}],jumpLoop=[{s:"-4112@51*F2E5F/GTCH-F<FU=G@G,F<FPZPZQ>2M+F<GPFQ@8F+F<FTE=2F*F<dSE?2F)F<eHE@2)FeF(F@FE2)FdF)e?dFDF(H*f?dI?F)H*Fe@gF=F+G*FeDF=F1eCFeF.H(FdAGeFd-FeGe@HeF.Fj@GdF<I)GjAG?dF(HeGfF<GBFdF)H*H)GA)G1,F?F)G1-I111(",c:[!1,c[15],c[17],c[16],c[18],c[0],c[19]]},{s:"111(4112@41+F2D31)GT@F4F.F<FUDF-F<FPZPZQEF,F<GPFQE=F+F<FTE>F*FeS?FDF*FfH@FCF)GeG(FAI?F)I*FDH=F*G+FE<F>*F,FdE<F=0FeDF<G/GgBH/GgGAH.FiG@H.FgJ@F/GeG,F@F.FeF/F@F-FdF1G>G,H1)K,G1-G)",c:[!1,c[15],c[17],c[16],c[18],c[0],c[19]]},{s:"111)4112?2,3G/F2A*3F<3F.2FT=3F@2G+F<FUE3+2<FPZPZQE<2F)G<GPFQE>F)G<FTE>F(GfSBI>F(Ff(IAK>Gd*FCG=J<F,FBG?I=,FdE>F(H,FeE=F)G,Ff>FAF0GhGAF0FfH(F@F1FeG*F?F1FgF*F?F1FgF*F?1)FfF*F>F1*FeF+H1,H+H1-G+G1",c:[!1,c[15],c[17],c[16],c[18],c[0],c[19]]}],sleepLoop=[{s:"111111111111111111.61/<2=H31,>L31*<OF21(=O40=OI2/=L<KP2-=M2F2PHP2-=H<K2PHP2,<J2PG2G2<HP2)G3F<G3<G2PF2<HP2(3[4H2<H2G2<GP2<_3H2<G2PG2PF2(<[2ZdZ3I2<G2G2<G2<_3F3G2<F2PF3FP2(F3Z4F4G3G3P2FP4SGQ2P3<PFP2S4M3PIP5P3(",c:[!1,c[16],c[15],c[17],c[19],c[18],c[0]]},{s:"1111111111111111)61/<2=H31,=M31*<OF21(<OF40=OI2/=OIP2-=M<KP2,>M2GPHP2+=H2F<H2G2PHP2+<J2QG2G2IP2)G3F<G3<H2F2<HP2(3[4H2<H2F2=G2(<_3H2<H2F3PF2(<[2ZdZ3I2<G2G2<G2<_3F3G2<G2F3FP2(F3Z4F5F3G3P2FP4SGQ2Q2<PFP2S4M3PIP5P3(",c:[!1,c[16],c[15],c[17],c[19],c[18],c[0]]},{s:"1111111111111.511>G31.<2K31+=N31(=OG21<OF2G2/=OI2.=OJP2,=N<KP2,<G3K2GPHP2+=H2P<J2QHP2+2J2QG4PIP2)F4F<G3<H2F2<HP2(3[4H2<H2P2=G2(<_3H2<H2F3PF2(<[2ZdZ3I2<G2PF2<G2<_3F3G2<GPF3FP2(F3Z4F8GP2P2FP2(2SGQ2R<PFP2S4M3PIP5P3(",c:[!1,c[16],c[15],c[17],c[19],c[18],c[0]]}],stillLoop=[{s:"11111111111)4>1(3+3H3>.3F4(M3=-QI2OF<,SOK<+PZQ=e<OF<+<Q>d=L<I<)S>e<J>I<)R?e<2J=I<+>)e<2J<J<0e<3H<dK</e<3H<dK</e=2G=eJ<.f<2G=fI=.e<4=f(J<-f<3<(g)H=,f=2<)g(<H<-=(>*<f(<H<-=(=+<f(<G=-A)?)<F=/=(=)>)@*",c:[!1,c[15],c[16],c[17],c[18],c[0],c[19]]},{s:"11111111111*3=103I=13+2M<.3G4(2N<-POM<+S=OI<+PZQ=e<J<K<*<Q>fK<J<)S>e<2O=)R?f2J<I<,>)<e2J<J<0<e<2H<dJ</<f<2GgI</<e<2G<gI<.<e<2G<hJ<-f<2F<(g(I<-<e(<2F<(g)H<,=e(<2<)=e)H<,>)>*>)F=.=)?(?(?.=*>(>)>+",c:[!1,c[15],c[16],c[17],c[18],c[0],c[19]]},{s:"11111111111*5=1/2J2<1,3L2</3*2O2<-2H3OH<+PON<*SOF<F<I<)PZQ=dL<F<dI<)<Q>e<L<dI<(S>f<K<dG<F<(R?g<2H<fG<+>)<f<2H<fH/<e=3G<gH.<f4G<f(dH<,<f<2H<g(dH<,<e<3F<(h)H,<f(<3*g(<H,<e<(=+<f(I<*=d*>*<e<(<G<+>+=)>d)=F<,=/?)?)",c:[!1,c[15],c[16],c[17],c[18],c[0],c[19]]}],homeImg={s:"111111111*311(=4(31-=)61,=)3G21-<)71,=)3)41+</31+</=,?,DP<)>S=)=W=)=U?T<R<,=P>P=S>Q=-=R>Q>S</=R<P>T<1(?P<T?.?Q?P?Q=,=SBQ>P=+<Q?Q?S=P<*=Q<S=*>S<*<T>.A)C1111(",c:[!1,c[12],c[24],c[13],c[25]]},tigerJumpLoop=[{s:"1111111111111111111111111111111111)2<211(3<5<-F*F-2=3<2<3<,2<F<3*2<4<2<5<,G<G<3<3<3<4<2<2+FPGPF2<2<:<4<(2(PZGZP2<3<2<2P<2<4<4<(K5<2<P<P2<3<2P(2)F<d<G<3<2P<R<3<2P-R(<3<Q<P)<F<4P/F3<2P2+HP<3=,F2=2<P-<F=)4P<2F<4Q/<FP+=4F<3<1G=P*4(G31)I<F,",c:[!1,c[21],c[23],c[22],c[14],c[0],c[15]]},{s:"1111111111111111111111111111111-211*2=3/F*F.2<4<2<.2H2F+2<3<6<-K<3<3<3<2<2=,FPGPG=2=2<3<4<3)2(PZGZPF5<3<9=)L<5Q<2<5<(2*F<d<G<4P<Q<3=2P.R(F3<P<Q<QF<3<1<3=(Q<*=3Q.GP3P/GP=2Q<*<F<3<1=P(4<P(G4Q1G=P=3F<Q2=1)K<(G(3<1.H(",c:[!1,c[21],c[23],c[22],c[14],c[0],c[15]]},{s:"1111111111111111111111111111111+2<20F*F/@2/<H<.3<3<3-L2*>2=2>-FPGPG3=2@2=2<*<(PZGZP=2>2=2?2<)2<(K?2<2=2<2<2=2=)F2d2G?2?2<2<2>2+RF=2=2<P2P=2>2/FP<3<2Q2R2=P2P.2F2<2Q)2Q2(F=2P*<+F2<Q0F2>2P2<2)FP=P1(G=2<2<)2F2<31)3@)G2=P1*H2+H3=10",c:[!1,c[23],c[21],c[22],c[14],c[0],c[15]]}],tigerWalkLoop=[{s:"11111111111111111111111111111111111*2+20=F</<F2F2<.<G=F<.3F3=*<F?F<F=F+2P3P3<F<F=F<FC(F(2Z3ZP2<F?F=F<F<F<(F=(F6F=F<F?F<F<F2,2FdF2F3>F<FQF>F2P,R(3Q<F=FQFP<FP2Q.3SF<FQFQ<F(3F-3FP)F<P)FP(<FP)2P,2FP*=F-<Q)G+2Q+F<P-<G)2Q)2G,=FP,<Q(3F*3.?*>F(4)",c:[!1,c[22],c[21],c[23],c[14],c[0],c[15]]},{s:"11111111111111111111111111111111-2+211(<F2F2<.<F=13F3=+<F=F=/2P3P3<F<G=F=F<F=,2Z3ZP2<F@F=F=F<F+7F=F=F>F?(=(<(2FdF2F2=F=F<F>F=2(F<*R(3<F?PF<F<F<2P13F=F<QFPF<FP3F/3FPF<FQFPFP<FP(3P-3Q(P=F(Q)F=F(G-2FP)G<.<G3F,3P*P=.=P3-3F)2F<0<F2/3)>0=,",c:[!1,c[22],c[21],c[23],c[14],c[0],c[15]]},{s:"11111111111111111111111111111111111*2*2/<G<F0F<2<G+F<G<G<F/3<3F<F<H<G<F<F<F,2P3P2F<G<G<G<I<F)F(PZ3ZPI<L<G(F+7F<K<H<F<(<)F(2<d<2<F<F<F<FP<PF<F<F)F<*R(3F<G<Q<P<H213P<G<Q<)PGP2<02=(<G-F=2<03P<G/G<P02=PG/2G<12PG/3G<F0H2.3=H*",c:[!1,c[22],c[23],c[21],c[14],c[0],c[15]]},{s:"1111111111111111111111111111111111*2<11*2<3<.F+F-<2<3<3<-2<G<2*2<5<3<2<2,G=G<2<3<2<2<3<4+GPGPG<2<2<2<5<3<+FPZGZP4<5<3<3<3*K2<3<2P<2<7(<2<)F<d<2<3<2P<Q<2<2=*2+RF4Q<Q<(2<2P1(F3=.<3<1(3<PG,G<3P02=FP=F+=P=2P<-3P*J*GP3<2P+2=,=G*F<G(4)",c:[!1,c[21],c[23],c[22],c[14],c[0],c[15]]},{s:"1111111111111111111111111111111.211*3<2<116<3-F*F,3=2<4<2<,2<F<2(<2(2<4<2<5<,G<G<2<4<6<2<4*GPGPF2<2<3<3<2<2<4*FPZGZP<4<2<Q<2<4<2*L2<3<R<P5<(2<*F<d<F<2<2<Q<)P=2<*3*R(<4<P<*<3P1)<2<P<-FP<2<1(3PF-F=4P02=P<-GP(=Q.3P(G-<F<)3P-3<)=F,H)=2*",c:[!1,c[21],c[23],c[22],c[14],c[0],c[15]]},{s:"11111111111111111111111111111111112<2<21/<3<5<2-F+F*2<3<3<4<2,2<G<2F<4<3<3<3<2,G=G3<3<4<4<3<+FPGPF<3<3<3<4<3<2*PZGZP2<2<3<2<4<3<3(2(K2<4<Q<P2<3<2(<2<(F<d<F=4R<P(<3P<P-R)2<2<P<P*3P=1(3<P.=Q1)=PF.2=P1(3Q</4<1>P0FP=2/F4F0F<(3+",c:[!1,c[21],c[23],c[22],c[14],c[0],c[15]]},{s:"1111111111111111111111111111111111)2=2113=2=2-F*F,<2=3=2<2-<G2<*3=2=2=2<2,G3G<2>2=2?2>+FPGPG<2<2>2=2=2<2<(<(PZGZPF<2=2<Q<3<2=2<2<(K2<2=2S2>2<)<)F2d2F2@2P3P=2>-R)<2=2Q2)4P<P1(2=P-=PF312F=2-=2FP1GP2=P,<PF31F3(<3,<3GP/2FP)>P,=PF2+",c:[!1,c[23],c[21],c[22],c[14],c[0],c[15]]}],birdStillLoop=[{s:"+61,71*4<41*F71)H61(H90G*8.G+2Q3Q2-F+P6R21P2R2S20P6T2.Q3Q2U.Q7U,S2R4T+S9S*T(9Q*S+;*P.F90F(F)F61F*G,",c:[!1,c[11],c[14],c[12],c[13]]},{s:"11+61,71*<3F41*<71)>80?9/=*7Q-=+2Q3S,<+P6T0P2R2U/P7U2,Q3R3U,R8T+S3R3T*T(9Q2)T*;2)Q-;1<)<61=)<*2)",c:[!1,c[11],c[12],c[14],c[13]]},{s:"1111+61,71*4<41*F71)H8P/H9Q-H*7R,F,2Q3T16U/P2R3U-Q8U,R3Q4T+S9S+S4R4R*S*9P3*Q,;1F(2F2(31)F(G-",c:[!1,c[11],c[14],c[12],c[13]]}],birdFlapLoop=[{s:"11051,71*91)3<4<2.G+4P4(H)J2(3R2(I(HZH4R2HZJ[G5Q2G[K[F5Q2F[L([5Q2[(H(H)Z6P2Z)H(H*6P2*H(H*8*G*G*7+G*F+7+F/5P21+Q)P1+Q*P1*Q*P1",c:[!1,c[11],c[14],c[13],c[12],c[20]]},{s:"1111051,71=(3F6.?)6F2(=*A(4P4?(B4Q3(E[4R(E<[5Q>ZA]5Q>ZA)[6P=([?*[6P<*Z?+8<+Z.81*2P51,P51,P)P1,P*P1+Q*P0",c:[!1,c[11],c[13],c[14],c[12],c[20]]},{s:"11111106*=)=,8(D*2F4F2E<)4P4@ZA(4P3@[?[4Q3?]?5R=[<[([>5R=[(Z*[>5Q<[.[=5Q<Z1(7P<1*71+61,P51+Q*P1+P+P1,P)Q/",c:[!1,c[11],c[13],c[14],c[12],c[20]]},{s:"11)21*2+31*3*4,>+4(6*@*;(B(6F6(=P=P<6H5(?Z=5F)F5(>[<F4G)G4F>[<F3G+G3F?[F3F-G2@ZFZG/GAZFZ1BZF1(B21*B1+[>1+[*Z1*[*[1.Z1",c:[!1,c[13],c[11],c[20],c[14],c[12]]}],groundImg={s:"(2(2(6=3<",c:[!1,c[1],c[2]]},babyWalkLoop=[{s:".41(603<2<303<31(4/:,;3)3)7)3(2+6*2-6)2-604(3/4)3.3,31*3+",c:[!1,c[1],c[0]]},{s:"-41)513<2<204<315(2.:,9(3*3(7)3)2)7*2(2+51(513(313)3/3*3/2,2+",c:[!1,c[1],c[0]]},{s:"-41(613<2<204<3150;+9(4*2(7*2*2(7-2*5.2*51(2(313)303*3/2-2)",c:[!1,c[1],c[0]]},{s:"-41(613<2<204<315)3,:(2*9.9.2(7.2)502(51(2)312*4.3,3-3/",c:[!1,c[1],c[0]]}],babyCarriedLoop=[{s:"11111)41(603<2<303<31(4/2(8(2*3(;)3(81511110",c:[!1,c[1],c[0]]},{s:"111111.41(603<2<303<3.2(8(2*3(;)2)8)2.511110",c:[!1,c[1],c[0]]},{s:"11111111(603<2<303<3-3(7-3(;)2)8(3.511110",c:[!1,c[1],c[0]]}],bgImage={s:"111031/311+5111,<1+51+71(<+;+51-311+31(3(9)5*<(<(<-71,210<11160=(=(=(=1111+<1111.<(<(<.G1111.I11/G.<-M1F1*J-<+OG.G1(N.OK(F(I0OH*OHXH/SNXJSLQG-RGRISLUOGR+RKTOOOGTOOOOOOOOOJ",c:[c[8],c[9],c[10],c[6],c[7]],w:50},trees=[{s:")51104-<)411+6,>)411*>.<F=)41,4?5(4)<G=0=3*4>F=4*AGE)4*=F>4+4CF?1=F=304,?GE<F?41/=L>GB4)6+4<JAI=(4>+>*3(>G<F=M=+6)3>4=OC1,AG?J<*5*3.3?I=(=G<G<4,=1+@*<H<G<.>5/5(5(<F<H=)4?1)4*4)<G<G=(4?1*3*4*=F=F>(=F?(411<G<H>G<)@21(6*=J=G=)616-<K=F<21/>.<H=G>11(>3*<H=H<105@)<H>G=/5*7)>F>F<F>F<F<-5+5*>(=G<F<F<H<F<*61>)4?F<F<H<F=+>.5-4=F<G<F>F<(?71(5)<I<H<F@(>11<O?*3<10=F<G<I>-41/<F<G=I<,61/<O=11.<F<F<I<G<11.<F<F<I<G<11-=F<L<F<11,=G<H=G<F<11+=J<G<G<F=11)=J=G<G=F=11=G=G<H=G<G=/",c:[!1,c[24],c[16],c[19]],w:40},{s:"11)2=/B(@+4=(<+D(?+5?+=(2=F)?+3F2A*?(2F?,3F2*?+>*H7G3)A+=(3<2I3G3->*=2?)H2G31*<)?*H4*?.@,2G3+>0?,2F4,=.A)>2G3,20<*<)=(2G3+21+<,2G5)2112G9<3.=(>(<(2H2,=/B(=2H2+>02H=2(<F2G2+>1)2K2G31*?)8F2F21+>3=)4F2F21,<3=,2F2F21/>+611,2F411,2G411*2F2F2F211*2F2F411*2F2F411)5F2F211(3F2I31",c:[!1,c[16],c[24],c[19]],w:30},{s:"1(3(2,51(3*4(4(=(4*2.4<(<*4)?*3/3>)<3<(?)2(31)<(=*>3)3<1*<3+=4(<2<-3*3(=3*<FA(3+3<(4<)4(<G?)3+4=4<,=F?(=3<2)3*=(<3(>F>)<+4+A3=G>*3+3(5=H3G<F=4(4+2(4)2AF<F=4)31(3+A-202(3)3(<G=*<+3*4?)3(<F=)3>)3*5)>2A)4>4/=2<*=F<*A.3=3*>F@(303)3*<F<F?*3/3.<F<F>+31.<F<F=11*=F<F<11+<G<F<11+<F=F<11+>G<11*<F<F<F<11)=F<F<F<11)<F<G<F=11=F<G<G<1)",c:[!1,c[24],c[16],c[19]],w:30}],letters=["(5(2)2(2)8*3*2","(4(2*6(2*3*6(","(4(2*3+2+2*2(4(","(3)2)2(2*3*3*2(4(","(4(2+2+4)2+6","(6+2+4)2+2+","(4(2*3+2)4*2(4(","+3*3*8*3*2","(4*2+2+2+2*4(","(5+2+3*2(2(2*2)","(2)2(2)2(2(2(2(2)2)2(2*2","(2*2+2+2+2,5","(2)4(4(2(3(2(3*3*2","(2)4)3(2(3(2(3)4*2","(4(2*3*3*3*2(4(","(4(2*3*6(2+2+","(4(2*3*3*3)2)3(2","(4(2*3*6(2(2)2)3","(4(2,4,2+2(4(","(6(2+2+2+2+2)","+3*3*3*3*2(4(","+3*2(2(2)2(2*2+2)","+3*3(2(3(2(4(4*2","+3*2(2(2*2*2(2(2*2","(2)2(2)2)3*2)3*2+","(5+2)3)2*2+6",")2+2+2+202)","11.2)","1.2,2*2.","+2*2*2+2*2*20",")3)2)3*3*3)2)3.",")2*3+2+2+2*4(","(4(2*2*2*2*2*5-","(4(2*2*2*2(3*2(4(",")2*2+2(2(2)2(5+2(","(5(2+4,3*2(4-",")4(2+4(2*3*2(4-","(5+2+2*2*2+2)",")2*2(2)4(2*3*2(4-",")6)3)6(2+2(4-"];function unpackImage(e){let t=[];for(let a=0;a<e.length;a++)t.push({type:Math.floor((e.charCodeAt(a)-40)/10),add:e.charCodeAt(a)%10});let a=[];for(let e=0;e<t.length;e++){a.push(t[e].type);for(let i=0;i<t[e].add;i++)a.push(t[e].type)}return a}function unpackImgLoop(e){for(let t=0;t<e.length;t++)e[t].a=[],e[t].a=unpackImage(e[t].s)}function unpack3(e){for(let t=0;t<e.length;t++)unpackImgLoop(e[t]),e[t].push(e[t][1])}function unpackAll(){unpackImgLoop(tigerWalkLoop),unpackImgLoop(walkLoop),unpackImgLoop(trees),unpack3([babyCarriedLoop,jumpLoop,stillLoop,sleepLoop,birdStillLoop,tigerJumpLoop]),unpackImgLoop(birdFlapLoop),birdFlapLoop.push(birdFlapLoop[2]),birdFlapLoop.push(birdFlapLoop[1]),unpackImgLoop(babyWalkLoop),babyWalkLoop.push(babyWalkLoop[2]),babyWalkLoop.push(babyWalkLoop[1]),groundImg.a=unpackImage(groundImg.s),bgImage.a=unpackImage(bgImage.s),homeImg.a=unpackImage(homeImg.s);for(let e=0;e<letters.length;e++)alphabet[e]={s:letters[e],c:[!1,c[1]],w:5};unpackImgLoop(alphabet)}function displayText(e,t,a,i,n,s,c){let F=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r>=97&&r<=122?F=r-97:r>=48&&r<=57?F=r-48+30:46===r?F=27:44===r?F=28:33===r?F=26:32===r?F=-1:47===r&&(F=29);let o=t+i*(s+5),l=a;c&&(l=a+10*Math.sin(i/e.length+frame/30)),-1!=F&&displayImage(alphabet[F].a,[!1,n],o,l,5,s/5,1)}}var frameRate=30;let sunDownFrame=100*frameRate;var player,bgm,yShift=0,frame=0;let phase,gameLoop,startPos,ground=[],canvasH=570,canvasW=window.innerWidth,levelRange=0,currentLevel={},currentPhase=0,clickA={x:0,y:0,w:200,h:50},currentScreen="start",introSeq=0,introTxt=["they call you mama ape.","your three kiddos that is.","mama ape likes her naps. ","three times a day.","nothing less. "," ","the three rascals invevitably run off","everytime you take a snooze.","once you wake,","you cannot sleep again","until they are back home."," ","those baby apes","are helpless on their own","so you will have to haul them ","on your back,","knocking back the junglefolk","that block your way."," ","in short","by sundown, everyone must be back home","and you must have thrice napped"," ","click to wake up!"],currentText=introTxt,trace=0,traceSpeed=.1,babies=[],baddies=[],baddieLocations=[],baddiesOnScreen=0,babiesReturned=0,inputLeft=!1,inputRight=!1,stopSpeed=.4,chirping=!1,level=0,naps=0,timeLeft=0,alphabet=[],particles=[],gameOver=!1;var canvas={canvas:document.createElement("canvas"),start:function(){this.canvas.width=canvasW,this.canvas.height=canvasH,this.context=this.canvas.getContext("2d"),document.body.insertBefore(this.canvas,document.body.childNodes[0])},clear:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}};function preload(){unpackAll(),canvas.start(),clickA.x=canvasW/2-clickA.w/2,clickA.y=canvasH/2+50,gameLoop=setInterval(function(){displayStartScreen(),trace+=traceSpeed,frame++},1e3/frameRate)}function displayStartScreen(){let e=frame%100*2.5,t=165+60*Math.sin(frame/100);displayText("ape naps",canvasW/2-150,canvasH/2-50,0,"rgb("+e+","+t+",50)",35,!0),displayText("click to",clickA.x,clickA.y,0,"black",20,!1),displayText("start",clickA.x+40,clickA.y+25,0,"black",20,!1),ctx.beginPath(),ctx.strokeStyle="black",ctx.rect(clickA.x,clickA.y,clickA.w,clickA.h),ctx.stroke(),ctx.closePath()}function startGame(){clearInterval(gameLoop),gameLoop=setInterval(updateGameArea,1e3/frameRate),console.log("game started"),currentScreen="wakeplayer",frame=0,trace=0,setupLevel(currentLevel=level1),shootTextSequence(),setTimeout(function(){currentScreen="wakeplayer"},1e3*(currentText.length-1))}function shootTextSequence(){for(let e=0;e<currentText.length;e++)setTimeout(function(){introSeq<currentText.length&&introSeq++},1e3*e)}function updateGameArea(){if(canvas.clear(),player.sleeping||gameOver)if(gameOver)displayText("game over. click to start again ",canvasW/4,canvasH/2,0,"black",25,!0);else{triggerParticles(flRand(player.x,player.x+160),flRand(player.y-200,player.y-0),[{r:225,g:200,b:10},{r:225,g:20,b:10},{r:25,g:200,b:10},{r:25,g:20,b:210}]),introSeq<currentText.length&&displayText("click to skip",canvasW-160,canvasH-30,0,"black",5,!1),bgImage.c[0]="rgb("+sunShades[6].r+","+sunShades[6].g+","+sunShades[6].b+")",drawBG(),updateAll(particles),displayTree(trees[0],canvasW/2+100,150,8),displayTree(trees[1],canvasW/2-120,150,8),displayTree(trees[2],canvasW/2-280,100,8),player.update();for(let e=0;e<introSeq;e++)displayText(currentText[e],48,48+20*e,400,"black",10,!0),displayText(currentText[e],50,50+20*e,400,"gold",10,!0)}else currentScreen="game",timeLeft=Math.floor((sunDownFrame-frame)/frameRate),chirping=!1,displayBackground(),updateAll(particles),displayGround(),displayAll(ground),displayReturnPoint(),player.update(),updateAll(baddies),updateAll(babies),displayText(timeLeft.toString(),canvasW-100,canvasH-100,0,"white",25,!1),continueLevel();runBGM(),trace+=traceSpeed,frame++}function displayReturnPoint(){let e=canvasW/2-(player.x-startPos.x),t=startPos.y-yShift-80,a=babiesReturned+"/3 babies returned";displayImage(homeImg.a,homeImg.c,e,t,25,4,1),displayText("home",e+25,t-20,0,c[23],8,!0),displayText(a,e+25,t,0,c[23],8,!0)}function posOnScreen(e){return{x:canvasW/2-(player.x-e.x),y:e.y-yShift}}function inRange(e,t,a){return e<t+a&&e>t-a}function inSegment(e,t,a,i){return e+t/2-8>a&&e-t/2+8<a+i}function inBox(e,t,a,i,n,s){return e>=a&&e<=a+n&&t>=i&&t<=i+s}function collideRectRect(e,t,a,i,n,s,c,F){return e+a>=n&&e<=n+c&&t+i>=s&&t<=s+F}function displayAll(e){for(let t=0;t<e.length;t++)e[t].display()}function updateAll(e){for(let t=0;t<e.length;t++)e[t].update()}function constrain(e,t,a){return Math.min(Math.max(e,t),a)}function updateAngle(e,t,a,i,n,s){return constrain(e+s*Math.sin(frame/t)*a,i,n)}function addLine(e,t,a,i){ctx.moveTo(e,t),ctx.lineTo(a,i)}function distToGround(e,t,a){let i=canvasH;for(let n=0;n<ground.length;n++)inSegment(e,a,ground[n].x,ground[n].w)&&ground[n].y>t&&ground[n].y<i&&(i=ground[n].y);return i-t}function getXYOnPlat(e,t){let a,i;return-1===e.p?(a=e.x,i=canvasH):(a=t[e.p].x+e.x,i=canvasH-t[e.p].y-10),{x:a,y:i}}function keyReleased(){console.log("key release "+event.keyCode),65===event.keyCode?inputLeft=!1:68===event.keyCode&&(inputRight=!1)}function keyPressed(){switch(console.log("key pressed! code: "+event.keyCode),event.keyCode){case 97:moveX(-1),console.log("left");break;case 100:moveX(1);break;case 32:player.sleeping||player.startJump(player);break;case 49:sfxOne();break;case 50:sfxTwo();break;case 51:sfxThree();break;case 52:sfxFour()}}function mousePressed(){console.log(event.clientX),"start"===currentScreen?inBox(event.clientX,event.clientY,clickA.x,clickA.y,clickA.w,clickA.h)&&startGame():"gameover"===currentScreen?(console.log("ey"),console.log(currentLevel),Object.assign(currentLevel,level1),console.log(currentLevel),currentText=introTxt,level=0,currentScreen="wakeplayer",introSeq=0,naps=0,currentPhase=0,player.sleeping=!1,gameOver=!1,trace=0,setupLevel(currentLevel)):"wakeplayer"===currentScreen&&(console.log("yo"),player.sleeping&&0===naps&&(frame=0),introSeq<currentText.length?introSeq=currentText.length:(player.sleeping=!1,trace=0))}function triggerParticles(e,t,a){let i=4+Math.floor(5*Math.random());for(let n=0;n<i;n++){let i=flRand(0,a.length);particles.push(new Particle(e,t,particles.length,a[i]))}}class Particle{constructor(e,t,a,i){this.x=e-player.w/2,this.y=t-player.h/2,this.speed=flRand(2,4),this.dir=2*Math.random()*Math.PI,this.vel={x:this.speed*Math.cos(this.dir),y:this.speed*Math.sin(this.dir)},this.opa=.8,this.r=i.r,this.g=i.g,this.b=i.b}update(){this.x+=this.vel.x,this.y+=this.vel.y,this.opa-=this.speed/150,ctx=canvas.context,ctx.beginPath(),ctx.globalAlpha=this.opa,ctx.fillStyle="rgb("+this.r+","+this.g+","+this.b+")";let e=posOnScreen(this);ctx.fillRect(e.x,e.y,5,5),ctx.stroke(),ctx.globalAlpha=1,ctx.closePath(),this.opa<=0&&killParticle(this.index)}}function flRand(e,t){return Math.floor(e+Math.random()*(t-e))}function killParticle(e){particles.splice(e,1)}let organ=[{f:499.98,a:.05024,p:-79.26},{f:989.78,a:.01608,p:10.89},{f:1489.66,a:.02179,p:-13.22},{f:1989.55,a:.03411,p:-30.97},{f:2489.44,a:.01904,p:156.26},{f:2989.32,a:.03099,p:-54.57},{f:3469.21,a:.00796,p:-49.46},{f:3979.1,a:.01728,p:-129.91}],lengthOf8=8,time=0;window.AudioContext=window.AudioContext||window.webkitAudioContext;var context=new AudioContext;let buffers=[];var voices=[{notes:"UPNPQPNPIIUPNPQPNPNLNLNPNLNLKLKLNLNPNLPNLKLNLKLILKNLKIPLKIPLKINLKINKIGNKIGNKIGLKIGLIGFLIGFLIGFKIGFKGFGIGFGFDFGIKFGIFGIGFIGDGKGKPKPSPSUSRPRPOWRPOWSRPWSRPWOMKWNLKNPRKOP",durations:"**))*))*****))*))*))*))*))*))*))*))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))*))*))))))))))))))))))))))))))))))))))))))))))))))))))))))****.",nextTrigger:0,noteCounter:0},{notes:"=?@=@=B=B=@=B=@=?=@=@=B=B=@=@=?=?=<?:?<?8?=8=8?8?8@8=8?8<8=848148;:=6:/36:8;48.1487:378383737383,383837373838;8;?DC?C?D?8;=;=:;=?3DEDB@?",durations:"))))))))))))))))))))))))))))))))))))))))))))))))))))))))))****************************))))))))****))))))))************************))))))",nextTrigger:0,noteCounter:0}];function runBGM(){playVoice(1,organWaveAt,.25,10,.19,.5),playVoice(0,organWaveAt,.25,40+frame%3e3,.45,.3),playDrum(),time++}function playDrum(){let e,t=Math.random();if(checkTime(2)?e=chanceToPlay(t,1,7,2,1):checkTime(1)?e=chanceToPlay(t,.4,3,2,1):checkTime(.5)&&(e=chanceToPlay(t,.4,0,2,8)),null!=e){let t=e.base+Math.random()*e.vari;loadAndPlay(noiseAt,5,.45,e.vol,t,!0)}}function checkTime(e){return time%(lengthOf8*e)==0}function chanceToPlay(e,t,a,i,n){if(e<t){let t=a+i+n;return e<a/t?{base:20,vari:5,vol:.04}:e<(a+i)/t?{base:4e3,vari:1e3,vol:.04}:{base:1e4,vari:1e3,vol:.01}}}function playVoice(e,t,a,i,n,s){let c=voices[e];if(time===c.nextTrigger){let F=c.noteCounter,r=c.durations.charCodeAt(F)-40;loadAndPlay(t,i,r*n,s,Math.pow(2,(c.notes.charCodeAt(F)-64)/12)*a,!1),voices[e].nextTrigger=time+r*lengthOf8,voices[e].noteCounter++,c.noteCounter>=c.notes.length&&(voices[e].noteCounter=0)}}function loadAndPlay(e,t,a,i,n,s){let c,F=[];0!=t&&(c=t);let r=0,o=context.sampleRate*a;for(var l=0;l<o;l++){let a=l/o;if(a>.7?r=constrain(r-3e-4,0,i):a<.1&&(r=constrain(r+.005,0,i)),F[l]=e(l,n)*r,l>=c&&l+10<o&&0!=t&&s)for(let e=0;e<4;e++)F[l-c+2*e]-=F[Math.round(l-c+2*e+1)];else l>=c&&l+10<o&&0!=t&&(F[l-c]+=F[l])}playSound(F)}function loadSlidingSound(e,t,a,i,n,s){let c,F=[],r=context.sampleRate*a,o=0,l=.01*a;0!=t&&(c=t);for(var d=0;d<r;d++){let a=d/r,p=n+a*(s-n);a>.7?o=constrain(o-l,0,1):a<.1&&(o=constrain(o+l,0,i)),F[d]=e(d,p)*o,d>=c&&0!=t&&(F[d-c]+=F[d])}playSound(F)}function playSound(e){for(var t=new Float32Array(e.length),a=0;a<e.length;a++)t[a]=e[a];var i=context.createBuffer(1,t.length,context.sampleRate);i.copyToChannel(t,0);var n=context.createBufferSource();n.buffer=i,n.connect(context.destination),n.start(0)}function sineWaveAt(e,t){let a=context.sampleRate/t;return Math.sin(e/(a/(2*Math.PI)))}function noiseAt(e,t){context.sampleRate;let a=constrain(Math.pow(e,2)/15e6,.1,.9),i=constrain(6-t/4e3,0,2e4);return e%2==0?0:(4*Math.random()-2+i*roundedSineWaveAt(e,t))*(1-a)}function roundedSineWaveAt(e,t){let a=context.sampleRate/t;return Math.round(Math.sin(e/(a/(2*Math.PI))))}function organWaveAt(e,t){let a=e/context.sampleRate,i=0;for(let e=0;e<organ.length;e++)i+=organ[e].a*Math.cos(2*Math.PI*t*organ[e].f*a+organ[e].p);return i}function sfxOne(){monkeyCrySFX()}function monkeyCrySFX(){sfxSeq(5,2.2+.2*Math.random(),-.02,.08,-.01,50,0,organWaveAt,!1,.5)}function collideSFX(){sfxSeq(3,100,-30,.05,.09,5,10,roundedSineWaveAt,6,.1)}function thumpSFX(){sfxSeq(2,200,-100,.05,.09,5,10,roundedSineWaveAt,6,.1)}function jumpSFX(e,t,a){loadSlidingSound(organWaveAt,7,a,1,e,t)}function birdChirpSFX(){loadSlidingSound(sineWaveAt,100,.1,.1,1400+400*Math.random(),2650),chirping||setTimeout(function(){loadSlidingSound(sineWaveAt,100,.25,.06,1400+400*Math.random(),2700+800*Math.random())},150),chirping=!0}function sfxSeq(e,t,a,i,n,s,c,F,r,o){for(let l=0;l<e;l++){let e=t+a*l,d=i+n*l;setTimeout(function(){loadAndPlay(F,r,d,o,e,!1)},l*(s+l*c))}}function sfxTwo(){}function sfxThree(){}function sfxFour(){}function newBaby(e,t){babies.push(new movingObject(e,t,20,20,displayBaby,updateBaby,babies.length)),babies[babies.length-1].isExploring=!1,babies[babies.length-1].isCarried=!1,babies[babies.length-1].grabbable=!0}function updateBaby(){this.isCarried?(this.x=player.x+20+player.dir*this.index*10,this.y=player.y-55+5*this.index,collideRectRect(canvasW/2-(player.x-startPos.x),startPos.y-yShift,startPos.w,startPos.h,canvasW/2,player.y-yShift,player.w,player.h)&&player.babiesCarried>0&&(player.babiesCarried--,this.isCarried=!1,this.grabbable=!1,this.returned=!0,this.isExploring=!1,this.x=startPos.x+startPos.w/2-15*this.index,this.y=startPos.y-20,babiesReturned++)):(this.isExploring?this.speedX=constrain(this.speedX+-1+2*Math.random(),-2,2):this.speedX=0,collideRectRect(canvasW/2-(player.x-this.x),this.y-yShift-this.h,this.w,this.h,canvasW/2,player.y-yShift-player.h,player.w,player.h)&&!player.knockedBack&&this.grabbable&&player.babiesCarried<2&&(this.isCarried||monkeyCrySFX(),this.isCarried=!0,player.babiesCarried++))}function displayBaby(){ctx=canvas.context,ctx.translate(0,-10);let e=canvasW/2-(player.x-this.x),t=this.y-yShift-this.h;this.isCarried?displayStringLoop(babyCarriedLoop,e,t,15,2,this.dir):displayStringLoop(babyWalkLoop,e,t,15,2,this.dir),ctx.translate(0,10)}class movingObject{constructor(e,t,a,i,n,s,c){this.speedX=0,this.x=e,this.y=t,this.w=a,this.h=i,this.jumping=!1,this.fallSpeed=0,this.display=n,this.updateMotion=s,this.counter=0,this.index=c,this.isCarried=!1,this.dir=1,this.init={x:e,y:t},this.flying=0===t}update(){this.onScreen=!1,inBox(canvasW/2-(player.x-this.x),this.y-yShift,0,0,canvasW,canvasH)&&(this.onScreen=!0),this.newPos(),this.updateMotion(),this.display()}newPos(){this.knockedBack&&this.calculateKnockBack(),this.x=constrain(this.x+this.speedX,0,levelRange),this.y=constrain(this.y,-5e3,canvasH),this.jumping?this.calculateJump():this.flying||this.isCarried||this.calculateFall()}startJump(e){!this.jumping&&distToGround(this.x+this.w/2,this.y,this.w)<2&&("player"===this.index?jumpSFX(.5,1,.35):this.onScreen&&jumpSFX(.8,1.2,.1),this.jumping=!0,this.jumpForce=20)}forceJump(e){jumpSFX(.8,1.2,.1),this.jumping=!0,this.jumpForce=e}calculateJump(){this.jumpForce-=2,this.y-=this.jumpForce,this.jumpForce<=0&&(this.jumping=!1)}calculateFall(){let e=distToGround(this.x+this.w/2,this.y,this.w);e>this.fallSpeed||!1===this.grabbable&&this.y<canvasH&&Math.random()>.5&&1!=this.returned?(this.y+=this.fallSpeed,this.fallSpeed+=1,this.falling=!0):e>0&&(!0===this.falling&&this.fallSpeed>1&&this.onScreen&&thumpSFX(),this.falling=!1,this.fallSpeed=0,this.y+=e-1)}calculateKnockBack(){let e=Math.floor(this.speedX);e>0?this.speedX--:e<0?this.speedX++:this.knockedBack=!1}collided(e){this.knockedBack=!0,this.speedX=10*e,this.jumpForce=0,this.flying=!1}moveInBounds(e){this.x<=this.leftBoundX?this.speedX=e:this.x>=this.rightBoundX?this.speedX=-e:0===this.speedX&&(Math.random()>.5?this.speedX=1:this.speedX=-1)}}function displayDudeBox(){ctx=canvas.context;let e=canvasW/2,t=-this.h;"wakeplayer"===currentScreen&&(t-=150),ctx.translate(0,t);let a=.5*canvasH;yShift=this.y>a?0:this.y-a,0!=this.speedX&&(this.dir=-this.speedX/Math.abs(this.speedX)),this.sleeping?displayStringLoop(sleepLoop,e,this.y-yShift,25,4,this.dir):distToGround(this.x+this.w/2,this.y,this.w)>2?displayStringLoop(jumpLoop,e,this.y-yShift,25,3,this.dir):0===this.speedX?displayStringLoop(stillLoop,e,this.y-yShift,25,3,this.dir):displayStringLoop(walkLoop,e,this.y-yShift,25,3,this.dir),ctx.translate(0,-t)}function updatePlayerMotion(){this.knockedBack||this.sleeping?this.sleeping&&(this.speedX=0):(inputLeft||inputRight?inputRight?player.speedX+=.5:inputLeft&&(player.speedX-=.5):player.speedX+stopSpeed<0?player.speedX+=stopSpeed:player.speedX-stopSpeed>0?player.speedX-=stopSpeed:player.speedX=0,player.speedX=constrain(player.speedX,-10,10))}function moveX(e){e>0?inputRight=!0:inputLeft=!0}function newBaddie(e,t,a,i){baddies.push(new movingObject(e,t,i.w,i.h,i.d,i.u,baddies.length));let n=baddies.length-1,s=baddies[n];s.leftBoundX=s.x-a,s.rightBoundX=s.x+a,s.stunTimer,s.stunned=!1}function checkPlayerCollision(e){let t=baddies[e],a=player;if(collideRectRect(canvasW/2-(a.x-t.x),t.y-yShift-t.h,t.w,t.h,canvasW/2,a.y-yShift-a.h,a.w,a.h)&&!a.knockedBack){let i=!1,n=0,s=!1,c=!1,F=.8;if(distToGround(a.x+a.w/2,a.y,a.w)>5){if(t.y-20>a.y)s=!0;else{if(!(t.y-t.h<a.y))return;c=!0}F=1.5,t.stunned=!0;let i=e;clearTimeout(t.stunTimer),t.stunTimer=setTimeout(function(){baddies[i].stunned=!1},1e3)}for(let e=0;e<babies.length;e++)!babies[e].isCarried||i||s||(babies[e].isCarried=!1,babies[e].isExploring=!0,i=!0,n=e,a.babiesCarried--,babies[n].grabbable=!1);i&&setTimeout(function(){babies[n].grabbable=!0},500);let r=15;t.x<a.x?sendEmFlying(e,F,r,s,c,i,n,-1):sendEmFlying(e,F,r,s,c,i,n,1)}}function sendEmFlying(e,t,a,i,n,s,c,F){let r=player;i?(r.forceJump(a),baddies[e].collided(F*t),console.log("over!")):n?(console.log("under!"),player.collided(-F),baddies[e].forceJump(1.5*a)):(console.log("neither!"),r.collided(F),baddies[e].collided(-F*t)),s&&babies[c].collided(3*F),triggerParticles(r.x+r.w/2,r.y+r.h/2,[{r:255,g:125,b:125}]),collideSFX()}function displayFlyingBaddie(){let e=-this.h;ctx.translate(0,e);let t=posOnScreen(this);0!=this.speedX&&(this.dir=-this.speedX/Math.abs(this.speedX)),this.flying?displayStringLoop(birdFlapLoop,t.x,t.y,20,2,-this.dir):displayStringLoop(birdStillLoop,t.x,t.y,20,2,this.dir),ctx.translate(0,-e),this.counter++}function updateFlyingBaddie(){checkPlayerCollision(this.index),this.flying?(this.y>this.init.y-50?this.y--:(this.y=constrain(this.y+-1+2*Math.random(),this.init.y-100,canvasH),this.counter%450==0&&(this.flying=!1,this.onScreen&&birdChirpSFX())),this.knockedBack||this.moveInBounds(2)):(this.knockedBack||this.moveInBounds(2),this.counter%150==0&&(this.flying=!0,this.onScreen&&birdChirpSFX()))}function displayJumpingBaddie(){let e=-this.h;ctx.translate(0,e);let t=posOnScreen(this);0!=this.speedX&&(this.dir=-this.speedX/Math.abs(this.speedX)),distToGround(this.x+this.w/2,this.y,this.w)>2?displayStringLoop(tigerJumpLoop,t.x,t.y-40.5,27,3,this.dir):displayStringLoop(tigerWalkLoop,t.x,t.y-40.5,27,3,this.dir),ctx.translate(0,-e),this.counter++}function updateJumpingBaddie(){checkPlayerCollision(this.index),this.counter%150==0&&this.startJump(baddies[this.index]),this.knockedBack||1==this.stunned||this.moveInBounds(2)}class groundTile{constructor(e,t,a){this.x=e,this.y=t,this.w=a,this.hasCos=!1}display(){if(inRange(this.x,player.x,canvasW/2)||inRange(this.x+this.w,player.x,canvasW/2)){let e=canvasW/2-(player.x-this.x);for(let t=0;t<this.w/20;t++)displayImage(groundImg.a,groundImg.c,e+20*t,this.y-yShift-4,5,4,1);if(0!=this.hasCos){let t=trees[this.hasCos.t],a=3;displayTree(t,e+this.hasCos.x,this.y-yShift-t.w*a,a)}}}}function displayTree(e,t,a,i){displayImage(e.a,e.c,t,a,e.w,i,1)}function continueLevel(){babiesReturned>=babies.length&&nextPhase(),timeLeft<=0&&(gameOver=!0,currentScreen="gameover")}function nextPhase(){if(napping=!0,babiesReturned=!0,player.sleeping=!0,trace=0,3===++naps){switch(currentText=["the day is over. level complete!","click to continue"],setTimeout(function(){currentScreen="wakeplayer"},1e3),shootTextSequence(),introSeq=0,++level){case 1:currentLevel=level2;break;case 2:currentLevel=level3}naps=0,setupLevel(currentLevel)}else{switch(currentText=["good job mama ape!","time for a nap."],currentScreen="wakeplayer",shootTextSequence(),introSeq=0,traceSpeed=10,currentPhase++,setTimeout(function(){player.sleeping=!1,traceSpeed=.1},5e3),phase=JSON.parse(JSON.stringify(currentLevel)),level){case 0:1===currentPhase?phase.baddies.push({p:25,x:30,r:300,kit:fBaddie}):2===currentPhase&&(phase.baddies.push({p:25,x:30,r:300,kit:fBaddie}),phase.baddies.push({p:15,x:250,r:245,kit:fBaddie}))}setupLevel(phase)}}let jBaddie={t:"jump",w:81,h:40.5},fBaddie={t:"fly",w:40,h:40},level1={size:1300,platforms:[{x:300,y:750,w:300},{x:650,y:670,w:50},{x:450,y:600,w:100},{x:380,y:580,w:50},{x:300,y:520,w:100},{x:380,y:460,w:80},{x:800,y:600,w:100},{x:920,y:580,w:50},{x:1e3,y:520,w:100},{x:920,y:460,w:80},{x:320,y:400,w:730},{x:550,y:350,w:50},{x:750,y:350,w:50},{x:650,y:280,w:50},{x:400,y:250,w:80},{x:320,y:180,w:50},{x:380,y:120,w:50},{x:320,y:60,w:50},{x:880,y:250,w:80},{x:950,y:180,w:50},{x:890,y:120,w:50},{x:950,y:60,w:50}],baddies:[{p:10,x:365,r:325,kit:jBaddie},{p:10,x:480,r:245,kit:fBaddie},{p:16,x:30,r:300,kit:fBaddie},{p:-1,x:500,r:450,kit:jBaddie},{p:2,x:10,r:40,kit:jBaddie},{p:6,x:10,r:40,kit:jBaddie}],cosmetics:[],player:{p:0,x:30},babies:{count:3,pos:[15,-1],p:0,x:0}},level2={size:2500,platforms:[{x:0,y:50,w:50},{x:0,y:100,w:50},{x:0,y:150,w:150},{x:300,y:80,w:100},{x:400,y:140,w:100},{x:500,y:200,w:250},{x:900,y:80,w:100},{x:1e3,y:140,w:100},{x:900,y:210,w:100},{x:1e3,y:280,w:100},{x:1100,y:350,w:250},{x:1500,y:70,w:100},{x:1600,y:140,w:100},{x:1700,y:200,w:250},{x:1950,y:270,w:250},{x:1900,y:350,w:50},{x:1850,y:420,w:50},{x:1800,y:490,w:50},{x:1700,y:560,w:100},{x:2200,y:350,w:50},{x:2250,y:420,w:50},{x:2300,y:490,w:50},{x:2350,y:490,w:100}],baddies:[{p:3,x:30,r:100,kit:fBaddie},{p:7,x:30,r:100,kit:fBaddie},{p:11,x:30,r:100,kit:fBaddie},{p:5,x:80,r:70,kit:jBaddie},{p:10,x:80,r:70,kit:jBaddie},{p:13,x:80,r:70,kit:jBaddie},{p:14,x:80,r:70,kit:jBaddie},{p:-1,x:500,r:200,kit:jBaddie},{p:-1,x:1e3,r:200,kit:jBaddie},{p:-1,x:1500,r:200,kit:jBaddie},{p:-1,x:2e3,r:200,kit:jBaddie},{p:-1,x:1e3,r:800,kit:fBaddie}],cosmetics:[],player:{p:2,x:10},babies:{count:3,pos:[5,10,13,14,18,22],p:0,x:0}};function setupLevel(e){levelRange=e.size,ground=[],baddies=[],babies=[],currentPhase=0;for(let t=0;t<e.platforms.length;t++)ground.push(new groundTile(e.platforms[t].x,canvasH-e.platforms[t].y,e.platforms[t].w));for(let t=0;t<e.baddies.length;t++){let a=getXYOnPlat(e.baddies[t],e.platforms),i=e.baddies[t].kit;switch(i.t){case"jump":i.d=displayJumpingBaddie,i.u=updateJumpingBaddie;break;case"fly":i.d=displayFlyingBaddie,i.u=updateFlyingBaddie}newBaddie(a.x,a.y,e.baddies[t].r,e.baddies[t].kit)}for(let t=0;t<e.size/150;t++){let e=Math.floor(3*Math.random());ground.push(new groundTile(150*t+10*(-1+e),canvasH,10)),ground[ground.length-1].hasCos={x:0,t:e}}let t=getXYOnPlat(e.player,e.platforms);(player=new movingObject(t.x,t.y,75,75,displayDudeBox,updatePlayerMotion,"player")).sleeping=!0,player.babiesCarried=0,startPos={x:t.x,y:t.y,w:80,h:80},babiesReturned=0;for(let t=0;t<e.babies.count;t++){e.babies.p=e.babies.pos[Math.floor(Math.random()*e.babies.pos.length)];let a=getXYOnPlat(e.babies,e.platforms);newBaby(a.x+10*t,a.y)}}let sunShades=[{r:133,g:186,b:214,t:0},{r:17,g:128,b:214,t:.6},{r:101,g:155,b:184,t:.7},{r:236,g:236,b:29,t:.8},{r:255,g:59,b:59,t:.9},{r:51,g:70,b:95,t:.96},{r:51,g:70,b:95,t:1}];function fadeSunLight(){let e,t,a,i=frame/sunDownFrame,n=sunShades;for(let s=0;s<n.length;s++)if(i<n[s].t){let i=(frame-n[s-1].t*sunDownFrame)/((n[s].t-n[s-1].t)*sunDownFrame);return{r:e=n[s-1].r+i*(n[s].r-n[s-1].r),g:t=n[s-1].g+i*(n[s].g-n[s-1].g),b:a=n[s-1].b+i*(n[s].b-n[s-1].b)}}}function displayBackground(){let e=fadeSunLight();bgImage.c[0]="rgb("+e.r+","+e.g+","+e.b+")",drawBG()}function drawBG(){displayImage(bgImage.a,bgImage.c,-player.x/4,-.4*canvasH-yShift/2,bgImage.w,1.5*canvasW/bgImage.w,1)}function displayGround(){player.x,this.x;for(let e=0;e<canvasW/20;e++)displayImage(groundImg.a,groundImg.c,20*e-player.x%20,canvasH-yShift-4,5,4,1)}
</script><style>canvas{ border:1px solid #d3d3d3; background-color: #f1f1f1;}</style></head>
<body onload="preload()" onkeypress="keyPressed()" onkeyup="keyReleased()" onclick="mousePressed()">
</body></html>
